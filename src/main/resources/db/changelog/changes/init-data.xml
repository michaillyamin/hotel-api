<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.3.xsd">

    <changeSet id="create-tables-1" author="Mikhail">
        <createTable tableName="arrival_times">
            <column name="arrival_time_id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="check_in_time" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="check_out_time" type="VARCHAR(10)">
            </column>
        </createTable>

        <createTable tableName="addresses">
            <column name="address_id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="house_number" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="street" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="city" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="country" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="post_code" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="contacts">
            <column name="contacts_id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="phone" type="VARCHAR(20)"/>
            <column name="email" type="VARCHAR(100)"/>
        </createTable>
    </changeSet>

    <changeSet id="create-tables-2" author="Mikhail">
        <createTable tableName="hotels">
            <column name="hotel_id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="TEXT"/>
            <column name="brand" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="address_id" type="BIGINT">
                <constraints nullable="false" foreignKeyName="address_id"
                             referencedTableName="addresses" referencedColumnNames="address_id"/>
            </column>
            <column name="contacts_id" type="BIGINT">
                <constraints nullable="false" foreignKeyName="contacts_id"
                             referencedTableName="contacts" referencedColumnNames="contacts_id"/>
            </column>
            <column name="arrival_time_id" type="BIGINT">
                <constraints nullable="false" foreignKeyName="arrival_time_id"
                             referencedTableName="arrival_times" referencedColumnNames="arrival_time_id"/>
            </column>
        </createTable>

        <createTable tableName="hotel_amenities">
            <column name="hotel_id" type="BIGINT">
                <constraints nullable="false" foreignKeyName="fk_amenity_hotel"
                             referencedTableName="hotels" referencedColumnNames="hotel_id"/>
            </column>
            <column name="amenity" type="VARCHAR(100)"/>
        </createTable>
    </changeSet>

    <changeSet id="insert-data-1" author="Mikhail">
        <insert tableName="arrival_times">
            <column name="arrival_time_id" value="1"/>
            <column name="check_in_time" value="14:00"/>
            <column name="check_out_time" value="12:00"/>
        </insert>

        <insert tableName="addresses">
            <column name="address_id" value="1"/>
            <column name="house_number" value="9"/>
            <column name="street" value="Pobediteley Avenue"/>
            <column name="city" value="Minsk"/>
            <column name="country" value="Belarus"/>
            <column name="post_code" value="220004"/>
        </insert>

        <insert tableName="contacts">
            <column name="contacts_id" value="1"/>
            <column name="phone" value="+375 17 309-80-00"/>
            <column name="email" value="doubletreeminsk.info@hilton.com"/>
        </insert>
    </changeSet>

    <changeSet id="insert-data-2" author="Mikhail">
        <insert tableName="hotels">
            <column name="hotel_id" value="1"/>
            <column name="name" value="DoubleTree by Hilton Minsk"/>
            <column name="description" value="The DoubleTree by Hilton Hotel Minsk offers 193 luxurious rooms..."/>
            <column name="brand" value="Hilton"/>
            <column name="address_id" value="1"/>
            <column name="contacts_id" value="1"/>
            <column name="arrival_time_id" value="1"/>
        </insert>

        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="1"/>
            <column name="amenity" value="Free parking"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="1"/>
            <column name="amenity" value="Free WiFi"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="1"/>
            <column name="amenity" value="Non-smoking rooms"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="1"/>
            <column name="amenity" value="Concierge"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="1"/>
            <column name="amenity" value="On-site restaurant"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="1"/>
            <column name="amenity" value="Fitness center"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="1"/>
            <column name="amenity" value="Pet-friendly rooms"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="1"/>
            <column name="amenity" value="Room service"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="1"/>
            <column name="amenity" value="Business center"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="1"/>
            <column name="amenity" value="Meeting rooms"/>
        </insert>
    </changeSet>

    <changeSet id="insert-data-3" author="Mikhail">
        <insert tableName="arrival_times">
            <column name="arrival_time_id" value="2"/>
            <column name="check_in_time" value="16:00"/>
            <column name="check_out_time" value="18:00"/>
        </insert>

        <insert tableName="addresses">
            <column name="address_id" value="2"/>
            <column name="house_number" value="6"/>
            <column name="street" value="Cyril and Methodius"/>
            <column name="city" value="Minsk"/>
            <column name="country" value="Belarus"/>
            <column name="post_code" value="220030"/>
        </insert>

        <insert tableName="contacts">
            <column name="contacts_id" value="2"/>
            <column name="phone" value="+375 17 329 03 00"/>
            <column name="email" value="monastyrskihotel@gmail.com"/>
        </insert>
    </changeSet>

    <changeSet id="insert-data-4" author="Mikhail">
        <insert tableName="hotels">
            <column name="hotel_id" value="2"/>
            <column name="name" value="Monastyrski Hotel"/>
            <column name="description" value="Hotel Monastyrsky offers yoga classes and free breakfast, making your trip to Minsk..."/>
            <column name="brand" value="Monastyrski"/>
            <column name="address_id" value="2"/>
            <column name="contacts_id" value="2"/>
            <column name="arrival_time_id" value="2"/>
        </insert>

        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="2"/>
            <column name="amenity" value="Free parking"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="2"/>
            <column name="amenity" value="Free WiFi"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="2"/>
            <column name="amenity" value="Non-smoking rooms"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="2"/>
            <column name="amenity" value="Concierge"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="2"/>
            <column name="amenity" value="Room service"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="2"/>
            <column name="amenity" value="Business center"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="2"/>
            <column name="amenity" value="Meeting rooms"/>
        </insert>
    </changeSet>

    <changeSet id="insert-data-5" author="Mikhail">
        <insert tableName="arrival_times">
            <column name="arrival_time_id" value="3"/>
            <column name="check_in_time" value="20:00"/>
            <column name="check_out_time" value="23:30"/>
        </insert>

        <insert tableName="addresses">
            <column name="address_id" value="3"/>
            <column name="house_number" value="7"/>
            <column name="street" value="Myasnikova"/>
            <column name="city" value="Minsk"/>
            <column name="country" value="Belarus"/>
            <column name="post_code" value="220030"/>
        </insert>

        <insert tableName="contacts">
            <column name="contacts_id" value="3"/>
            <column name="phone" value="+375-29-152-25-55 "/>
            <column name="email" value="info@hotel-buta.by"/>
        </insert>
    </changeSet>

    <changeSet id="insert-data-6" author="Mikhail">
        <insert tableName="hotels">
            <column name="hotel_id" value="3"/>
            <column name="name" value="Buta Boutique Hotel"/>
            <column name="description" value="Boutique Hotel Buta is a real gem of a cozy quarter in the very center of Minsk..."/>
            <column name="brand" value="Boutique"/>
            <column name="address_id" value="3"/>
            <column name="contacts_id" value="3"/>
            <column name="arrival_time_id" value="3"/>
        </insert>

        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="3"/>
            <column name="amenity" value="Free parking"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="3"/>
            <column name="amenity" value="Free WiFi"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="3"/>
            <column name="amenity" value="Non-smoking rooms"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="3"/>
            <column name="amenity" value="Concierge"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="3"/>
            <column name="amenity" value="On-site restaurant"/>
        </insert>
        <insert tableName="hotel_amenities">
            <column name="hotel_id" value="3"/>
            <column name="amenity" value="Fitness center"/>
        </insert>
    </changeSet>

    <changeSet id="reset-sequences" author="Mikhail">
        <sql>ALTER TABLE addresses ALTER COLUMN address_id RESTART WITH 4;</sql>
        <sql>ALTER TABLE arrival_times ALTER COLUMN arrival_time_id RESTART WITH 4;</sql>
        <sql>ALTER TABLE contacts ALTER COLUMN contacts_id RESTART WITH 4;</sql>
        <sql>ALTER TABLE hotels ALTER COLUMN hotel_id RESTART WITH 4;</sql>
    </changeSet>

</databaseChangeLog>